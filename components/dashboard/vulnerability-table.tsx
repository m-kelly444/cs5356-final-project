'use client';

import React from 'react';
import VulnerabilityTable from './vulnerability-table'; // Using your original component

// Mock data for vulnerabilities
const mockVulnerabilities = [
  {
    id: "CVE-2025-1234",
    title: "Remote Code Execution in OpenSSH Server",
    severity: "Critical",
    score: 9.8,
    published: "2025-04-12",
    vector: "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-2345",
    title: "SQL Injection Vulnerability in WordPress Plugin",
    severity: "High",
    score: 8.5,
    published: "2025-04-15",
    vector: "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-3456",
    title: "Cross-Site Scripting (XSS) in React Framework",
    severity: "Medium",
    score: 6.4,
    published: "2025-04-20",
    vector: "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N"
  },
  {
    id: "CVE-2025-4567",
    title: "Buffer Overflow in Linux Kernel",
    severity: "Critical",
    score: 9.6,
    published: "2025-04-25",
    vector: "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-5678",
    title: "Authentication Bypass in Apache Tomcat",
    severity: "High",
    score: 8.1,
    published: "2025-04-28",
    vector: "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-6789",
    title: "Denial of Service Vulnerability in Nginx",
    severity: "Medium",
    score: 5.9,
    published: "2025-05-01",
    vector: "CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:N/A:H"
  },
  {
    id: "CVE-2025-7890",
    title: "Information Disclosure in Microsoft Exchange",
    severity: "High",
    score: 7.5,
    published: "2025-05-03",
    vector: "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N"
  },
  {
    id: "CVE-2025-8901",
    title: "Privilege Escalation in Docker Engine",
    severity: "High",
    score: 7.8,
    published: "2025-05-05",
    vector: "CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-9012",
    title: "Command Injection in Python Package",
    severity: "Critical",
    score: 9.3,
    published: "2025-05-06",
    vector: "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H"
  },
  {
    id: "CVE-2025-0123",
    title: "Path Traversal Vulnerability in Spring Framework",
    severity: "Medium",
    score: 6.5,
    published: "2025-05-06",
    vector: "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N"
  }
];

// Component that uses the VulnerabilityTable with mock data
const VulnerabilityTableWithMockData: React.FC = () => {
  return (
    <div className="p-6 w-full">
      <h2 className="text-xl font-bold mb-2">Critical Vulnerabilities</h2>
      <p className="text-gray-400 text-sm mb-4">
        Recently discovered high-severity vulnerabilities from NVD and CISA KEV that could impact your organization.
      </p>
      
      <div className="mb-4 p-3 border border-yellow-600/30 bg-yellow-900/20 rounded-md">
        <div className="flex items-start gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
          <div>
            <h3 className="text-sm font-bold text-yellow-500">Urgent Remediation Required</h3>
            <p className="text-xs text-gray-300 mt-1">
              3 critical vulnerabilities have been added to the CISA Known Exploited Vulnerabilities (KEV) catalog with a due date of May 21, 2025. Immediate patching is advised.
            </p>
          </div>
        </div>
      </div>
      
      {/* Filter controls - could be implemented more fully */}
      <div className="flex flex-wrap gap-2 mb-4">
        <button className="px-3 py-1 text-xs bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-full">
          All Vulnerabilities
        </button>
        <button className="px-3 py-1 text-xs bg-red-900/30 hover:bg-red-900/50 border border-red-800/50 rounded-full text-red-400">
          Critical Only
        </button>
        <button className="px-3 py-1 text-xs bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-full">
          CISA KEV
        </button>
        <button className="px-3 py-1 text-xs bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-full">
          Last 7 Days
        </button>
      </div>
      
      {/* Render the VulnerabilityTable with mock data */}
      <VulnerabilityTable vulnerabilities={mockVulnerabilities} />
      
      {/* Additional info section */}
      <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-gray-800/50 p-3 rounded-md border border-gray-700">
          <h3 className="text-sm font-bold mb-2">Vulnerabilities by Severity</h3>
          <div className="space-y-2">
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span className="text-gray-400">Critical</span>
                <span className="text-red-400">3</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div className="bg-red-500 h-2 rounded-full" style={{ width: '30%' }}></div>
              </div>
            </div>
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span className="text-gray-400">High</span>
                <span className="text-orange-400">4</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div className="bg-orange-500 h-2 rounded-full" style={{ width: '40%' }}></div>
              </div>
            </div>
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span className="text-gray-400">Medium</span>
                <span className="text-yellow-400">3</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div className="bg-yellow-500 h-2 rounded-full" style={{ width: '30%' }}></div>
              </div>
            </div>
          </div>
        </div>
        
        <div className="bg-gray-800/50 p-3 rounded-md border border-gray-700">
          <h3 className="text-sm font-bold mb-2">Top Affected Vendors</h3>
          <ul className="space-y-2 text-sm">
            <li className="flex justify-between">
              <span className="text-gray-300">Microsoft</span>
              <span className="text-cyan-400">3</span>
            </li>
            <li className="flex justify-between">
              <span className="text-gray-300">Apache</span>
              <span className="text-cyan-400">2</span>
            </li>
            <li className="flex justify-between">
              <span className="text-gray-300">Linux</span>
              <span className="text-cyan-400">1</span>
            </li>
            <li className="flex justify-between">
              <span className="text-gray-300">WordPress</span>
              <span className="text-cyan-400">1</span>
            </li>
          </ul>
        </div>
        
        <div className="bg-gray-800/50 p-3 rounded-md border border-gray-700">
          <h3 className="text-sm font-bold mb-2">Recent Additions</h3>
          <div className="text-xs text-gray-300">
            <p>10 new vulnerabilities added in the last 7 days</p>
            <p className="mt-2">3 critical vulnerabilities added to CISA KEV catalog this week</p>
          </div>
          <button className="mt-3 w-full px-3 py-1 text-xs bg-cyan-900/30 hover:bg-cyan-900/50 border border-cyan-800/50 rounded text-cyan-400">
            View Full Report
          </button>
        </div>
      </div>
    </div>
  );
};

export default VulnerabilityTableWithMockData;